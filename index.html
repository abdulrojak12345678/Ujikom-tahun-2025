<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>TO DO LIST</title>
  
  <!-- HTML -->
  

  <!-- Custom Styles -->
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <h1>
     tugas harian siswa smk plus insan cemerlang 
   </h1>
   <table class="table" id="daftar-tugas">
     <thead>
       <tr>
         <th scope="col">#</th>
         <th scope="col">tugas</th>
         <th scope="col" id="status">status</th>
         <th scope="col">prioritas</th>
         <th scope="col">tanggal</th>
         <th>aksi</th>
         <th>aksi</th>
       </tr>
     </thead>
   </table>
   
  <!-- Project -->
  <script type="module">
    import { ambildaftartugas, hapustugas, ubahStatusTugas } from './main.js';
    $(document).ready(async function () {
    let elemenDaftar = $("#daftar-tugas > thead");
    let daftartugas = await ambildaftartugas();

    // Sorting: selesai ke bawah
    let tugasBelumSelesai = daftartugas.filter(data => data.status !== "selesai");
    let tugasSelesai = daftartugas.filter(data => data.status === "selesai");
    let tugasTersortir = [...tugasBelumSelesai, ...tugasSelesai];

    let nomor = 1;
    tugasTersortir.forEach((data) => {
   //   console.log(data);
      elemenDaftar.append(
        '<tr>' +
        '<th>' + nomor + '</th>' +
        '<td>' + data.tugas + '</td>' +
        '<td>' +
        `<button class="btn btn-sm btn-status btn-outline-secondary" data-status="${data.status}" data-id="${data.id}">${data.status}</button>` +
        '</td>' +
        '<td>' + data.prioritas + '</td>' +
        '<td>' + data.tanggal + '</td>' +
        '<td> <button class="btn btn-warning ubah" data="' + data.id + '">Ubah</button></td>' +
        '<td> <a href="#" class="btn btn-danger tombol-hapus" data="' + data.id + '">Hapus</a></td>' +
        '</tr>'
      );
      nomor++;
    });
    <-tombol hapus->
('.tombol-hapus').click(async function () {
      await hapustugas($(this).attr('data'));
      location.reload();
    });
        // Ubah
    $('.ubah').click(function () {
      window.location.replace('ubahtugas.html?docId=' + $(this).attr('data'));

    });


  </script>
</body>
</html>